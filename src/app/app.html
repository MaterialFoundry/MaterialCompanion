<!DOCTYPE html>
<html lan="en">
  <head>
    <meta charset="UTF-8">
    <!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP -->
    <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'"> -->
    <title>Material Companion</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://kit.fontawesome.com/3c1a1d5545.js" crossorigin="anonymous"></script>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script> 
        $(function () {
            var includes = $('[data-include]')
            $.each(includes, function () {
                var file = 'html/' + $(this).data('include') + '.html'
                $(this).load(file)
            })
        });

        function openTab(evt, tabName) {
            // Declare all variables
            var i, tabcontent, tablinks;

            // Get all elements with class="tabcontent" and hide them
            tabcontent = document.getElementsByClassName("mainTabContent");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }

            // Get all elements with class="tablinks" and remove the class "active"
            tablinks = document.getElementsByClassName("mainTabLinks");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }

            // Show the current tab, and add an "active" class to the button that opened the tab
            document.getElementById(tabName).style.display = "block";
            evt.currentTarget.className += " active";
        } 

        function openMpTab(evt, tabName) {
            // Declare all variables
            var i, tabcontent, tablinks;

            // Get all elements with class="tabcontent" and hide them
            tabcontent = document.getElementsByClassName("mpTabContent");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }

            // Get all elements with class="tablinks" and remove the class "active"
            tablinks = document.getElementsByClassName("mpTabLinks");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }

            // Show the current tab, and add an "active" class to the button that opened the tab
            document.getElementById(tabName).style.display = "block";
            evt.currentTarget.className += " active";
        } 
    </script> 
  </head>
  <body>
    <div class="logoOverlay" id="logoOverlay">
        <img src="images/MaterialFoundry.png">
    </div>

    <!-- Popup -->
    <div id="popup" class="modal">
        <!-- Popup content -->
        <div class="modal-content">
            <span class="close" id="closePopup">&times;</span>
            <span style="color:red; display:none" id="popupError"><h3><i class="fa-solid fa-triangle-exclamation"></i>&nbsp;Error</h3></span>
            <div id="popupContent"></div>
            <div id="popupDetails" style="display:none">
                <div class="expandable" id="detailsHeader"><img src="images/arrow-right.png" class="expandableIcon" style="width:20px">Details</div>
                <textArea class="collapsed updateDetails" id="popupDetailsContent" rows="10" cols="50" style="max-width:100%"></textArea>
            </div>
        </div>
    </div>

    <!-- Sensor update problem popup -->
    <div id="errorPopup" class="modal">
        <!-- Popup content -->
        <div class="modal-content">
            <span class="close" id="closeerrorPopup">&times;</span>
            <span style="color:red"><h3><i class="fa-solid fa-triangle-exclamation"></i>&nbsp;Error</h3></span>
            <div id="errorPopupContent"></div>
        </div>
    </div>

    <div class="mainBody">
        <!-- Tab links -->
        <div class="mainTab">
            <button class="mainTabLinks active" onclick="openTab(event, 'overviewTab')">{{localize "OVERVIEW"}}</button>
            <button class="mainTabLinks" id="MP_btn" onclick="openTab(event, 'materialPlaneTab')">Material Plane</button>
            <button class="mainTabLinks" id="MD_btn" onclick="openTab(event, 'materialDeckTab')">Material Deck</button>
            <button class="mainTabLinks" id="MK_btn" onclick="openTab(event, 'materialKeysTab')">Material Keys</button>
            <button class="mainTabLinks" onclick="openTab(event, 'settingsTab')">{{localize "SETTINGS"}}</button>
        </div>

        <!-- Tab content -->
        <div id="overviewTab" class="mainTabContent" style="display:block" data-include="overview"></div>
        <div id="materialPlaneTab" class="mainTabContent" data-include="materialPlane"></div>
        <div id="materialDeckTab" class="mainTabContent" data-include="materialDeck"></div>
        <div id="materialKeysTab" class="mainTabContent" data-include="materialKeys"></div> 
        <div id="settingsTab" class="mainTabContent" data-include="settings"></div> 
    </div>

    <!-- Footer -->
    <div id="footer" class="footer" data-include="footer"></div> 
    <script>
        require('./app.js');
    </script>
  </body>
</html>